@startuml Category_Read_Sequence

skinparam backgroundColor white
skinparam sequenceArrowThickness 2
skinparam sequenceMessageAlign center
skinparam sequenceGroupBodyBackgroundColor #F8F9FA
skinparam sequenceParticipantBorderColor #6C757D
skinparam sequenceParticipantBackgroundColor #E9ECEF
skinparam sequenceLifeLineStroke dash

title Get All Categories - Sequence Diagram

actor User as U
participant ":Category Page" as UI
participant ":CategoryController" as CC
participant ":CategoryService" as CS
participant ":CategoryMapper" as CM
participant ":CategoryRepository" as CR

== Request Phase ==
U -> UI: Yêu cầu xem danh sách Category
activate U
activate UI
UI -> CC: GET /api/categories
activate CC
CC -> CS: getAllActiveCategories()
activate CS
CS -> CR: findAll()
activate CR
CR --> CS: List<Category>
deactivate CR
alt Không có category nào
    CS --> CC: 404 Not Found {no categories}
    CC --> UI: 404 Not Found {no categories}
    UI --> U: Hiển thị thông báo "Không có category"
else Có category
    loop For each Category
        CS -> CM: toResponseDto(category)
        activate CM
        CM --> CS: CategoryResponseDto
        deactivate CM
    end
    CS --> CC: List<CategoryResponseDto>
    CC --> UI: 200 OK List<CategoryResponseDto>
    UI --> U: Hiển thị danh sách category
end

deactivate CS
deactivate CC
deactivate UI
deactivate U

note right of UI
    CategoryResponseDto: id, name, description, createdAt, updatedAt
end note

@enduml 