@startuml Dashboard_Class_Diagram_BE

skinparam backgroundColor white
skinparam linetype ortho
skinparam classAttributeIconSize 0
skinparam classFontSize 11
skinparam classBackgroundColor #F8F9FA
skinparam classBorderColor #6C757D
skinparam arrowColor #495057
skinparam packageStyle rectangle
skinparam ranksep 20
skinparam nodesep 15

title Dashboard Module â€“ Class Diagram (Backend)

package "API Layer" {
  class ReportController {
    + getRemainSummary(): List<CategoryRemainSummaryDto>
    + getRevenueTrend(type, from, to): List<RevenueTrendDto>
    + getStockByCategory(): List<StockByCategoryDto>
    + getExpiringLots(days): List<ExpiringLotDto>
    + getInOutSummary(from, to): List<InOutSummaryDto>
  }
  class ImportTransationController {
    + getRecentImports(limit): List<ImportTransactionResponseDto>
  }
  class SaleTransactionController {
    + getRecentSales(limit): List<SaleTransactionResponseDto>
  }
}

package "Service Layer" {
  interface ReportService {
    + getRemainSummary()
    + getRevenueTrend(type, from, to)
    + getStockByCategory()
    + getExpiringLots(days)
    + getInOutSummary(from, to)
  }
  class ReportServiceImpl {
    - importTransactionDetailRepository
    - stocktakeRepository
    - saleTransactionRepository
    - productRepository
    - zoneRepository
    - categoryRepository
    - importTransactionRepository
  }
  ReportService <|.. ReportServiceImpl
}

package "Repository Layer" {
  interface ImportTransactionDetailRepository
  interface ImportTransactionRepository
  interface SaleTransactionRepository
  interface StocktakeRepository
  interface ProductRepository
  interface ZoneRepository
  interface CategoryRepository
}

package "DTOs" {
  class CategoryRemainSummaryDto
  class RevenueTrendDto
  class StockByCategoryDto
  class ExpiringLotDto
  class InOutSummaryDto
  class ImportTransactionResponseDto
  class SaleTransactionResponseDto
}

' Relationships
ReportController ..> ReportService : uses
ReportServiceImpl ..> ImportTransactionDetailRepository
ReportServiceImpl ..> ImportTransactionRepository
ReportServiceImpl ..> SaleTransactionRepository
ReportServiceImpl ..> ProductRepository
ReportServiceImpl ..> ZoneRepository
ReportServiceImpl ..> CategoryRepository
ReportServiceImpl ..> StocktakeRepository

ImportTransationController ..> ImportTransactionRepository : findRecentImports
SaleTransactionController ..> SaleTransactionRepository : findRecentSales

@enduml 